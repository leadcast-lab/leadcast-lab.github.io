<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マイページ | KNOWLEDGE CAST</title>
    <link rel="stylesheet" href="/expert/resources/css/common.css">
    <link rel="stylesheet" href="/expert/resources/css/sidebar-header.css">
    <link rel="stylesheet" href="/expert/resources/css/mypage.css">
</head>
<body>
    <!-- ヘッダー -->
    <div id="header-container"></div>

    <!-- サイドバー -->
    <div id="sidebar-container"></div>

    <!-- メインコンテンツ -->
    <main class="main-content">
        <div class="container">
            <h1 class="page-title">マイページ</h1>

            <!-- 登録情報セクション -->
            <section class="content-section">
                <div class="user-profile">
                    <div class="profile-info">
                        <h2>登録情報</h2>
                        <div class="profile-details">
                            <div class="profile-detail-item">
                                <span>👤 氏名：田中 太郎</span>
                            </div>
                            <div class="profile-detail-item">
                                <span>📧 メールアドレス：tanaka@example.com</span>
                            </div>
                            <div class="profile-detail-item">
                                <span>📞 電話番号：050-1234-5678</span>
                            </div>
                            <div class="profile-detail-item">
                                <span>💼 専門分野：マーケティング, セールス</span>
                            </div>
                        </div>
                    </div>
                    <button class="edit-button">
                        ✏️ 編集
                    </button>
                </div>
            </section>

            <!-- 案件レビューセクション -->
            <section class="content-section">
                <h2 class="section-title">📝 案件レビュー</h2>
                
                <div class="review-card">
                    <div class="review-header">
                        <div class="company-name">株式会社テックソリューション</div>
                        <div class="review-meta">お客様のマーケティング担当者</div>
                    </div>
                    <div class="star-rating">
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="rating-text">5.0</span>
                    </div>
                    <p class="review-text">
                        お客様の案件やコンサルいただき、すごく勉強になりました。また、参考になる「アクションプランの作成例」等、チーム全体で有効活用させていただいています。
                    </p>
                </div>

                <div class="review-card">
                    <div class="review-header">
                        <div class="company-name">株式会社イノベーション</div>
                        <div class="review-meta">お客様の営業部長</div>
                    </div>
                    <div class="star-rating">
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="rating-text">5.0</span>
                    </div>
                    <p class="review-text">
                        セールス戦略について詳しく教えていただき、実際に売上向上につながりました。具体的な事例を交えた説明で非常に分かりやすかったです。
                    </p>
                </div>

                <div class="review-card">
                    <div class="review-header">
                        <div class="company-name">株式会社グロースパートナーズ</div>
                        <div class="review-meta">お客様の事業開発担当者</div>
                    </div>
                    <div class="star-rating">
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="star">⭐</span>
                        <span class="rating-text">5.0</span>
                    </div>
                    <p class="review-text">
                        マーケティング戦略の立案から実行まで、段階的にサポートしていただきました。おかげで新規顧客の獲得数が大幅に改善されました。
                    </p>
                </div>
            </section>

            <!-- 案件履歴セクション -->
            <section class="content-section">
                <h2 class="section-title">📋 案件履歴</h2>
                
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>日付</th>
                            <th>スポンサー</th>
                            <th>動画タイトル</th>
                            <th>金額</th>
                            <th>ステータス</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2024/01/15</td>
                            <td>株式会社テックソリューション</td>
                            <td>効果的なリード獲得方法</td>
                            <td>¥5,000</td>
                            <td><span class="status-badge status-waiting">申請中</span></td>
                        </tr>
                        <tr>
                            <td>2024/01/12</td>
                            <td>株式会社イノベーション</td>
                            <td>セールス戦略実践講座</td>
                            <td>¥7,500</td>
                            <td><span class="status-badge status-completed">完了</span></td>
                        </tr>
                        <tr>
                            <td>2024/01/10</td>
                            <td>株式会社テックソリューション</td>
                            <td>デジタルマーケティング戦略</td>
                            <td>¥5,000</td>
                            <td><span class="status-badge status-completed">完了</span></td>
                        </tr>
                        <tr>
                            <td>2024/01/08</td>
                            <td>株式会社グロースパートナーズ</td>
                            <td>マーケティング戦略立案</td>
                            <td>¥6,000</td>
                            <td><span class="status-badge status-completed">完了</span></td>
                        </tr>
                        <tr>
                            <td>2024/01/05</td>
                            <td>株式会社テックソリューション</td>
                            <td>セールススキル向上講座</td>
                            <td>¥5,000</td>
                            <td><span class="status-badge status-completed">完了</span></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- 総合報酬額セクション -->
            <section class="content-section">
                <div class="reward-summary">
                    <div class="reward-title">総合報酬額</div>
                    <div class="reward-amount">¥ 28,500</div>
                    <div class="reward-period">今月の獲得金額</div>
                    <div class="reward-change">前月比 +35% 📈</div>
                </div>
            </section>
        </div>
    </main>

    <script>
        // 編集ボタンのクリックイベント
        document.querySelector('.edit-button').addEventListener('click', () => {
            alert('プロフィール編集機能は準備中です。');
        });

        // レビューカードのホバーエフェクト
        document.querySelectorAll('.review-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-4px)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0)';
            });
        });

        // テーブル行のホバーエフェクト
        document.querySelectorAll('.history-table tbody tr').forEach(row => {
            row.addEventListener('click', () => {
                alert('案件詳細画面は準備中です。');
            });
        });

        // レスポンシブメニュー（必要に応じて追加）
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.style.transform = sidebar.style.transform === 'translateX(0px)' ? 'translateX(-100%)' : 'translateX(0px)';
        }

        // コンポーネントの読み込み
        async function loadComponents() {
            try {
                // ヘッダーを読み込み
                const headerResponse = await fetch('/expert/components/header.html');
                const headerHTML = await headerResponse.text();
                document.getElementById('header-container').innerHTML = headerHTML;

                // サイドバーを読み込み
                const sidebarResponse = await fetch('/expert/components/sidebar.html');
                const sidebarHTML = await sidebarResponse.text();
                document.getElementById('sidebar-container').innerHTML = sidebarHTML;

                // マイページがアクティブになるようにサイドバーを更新
                setTimeout(() => {
                    updateSidebarActive();
                }, 100);
            } catch (error) {
                console.error('コンポーネントの読み込みエラー:', error);
            }
        }

        // サイドバーのアクティブ状態を更新
        function updateSidebarActive() {
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            sidebarItems.forEach(item => {
                item.classList.remove('active');
                // mypage.htmlの場合はマイページメニューをアクティブにする
                if (item.href && (item.href.includes('/expert/mypage.html') || item.href.endsWith('mypage.html'))) {
                    item.classList.add('active');
                }
            });
        }

        // ページ読み込み時にコンポーネントを読み込む
        document.addEventListener('DOMContentLoaded', loadComponents);
    </script>
</body>
</html>
