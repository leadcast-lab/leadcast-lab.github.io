<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動画詳細 | KNOWLEDGE CAST</title>
    <link rel="stylesheet" href="/expert/resources/css/common.css">
    <link rel="stylesheet" href="/expert/resources/css/sidebar-header.css">
    <link rel="stylesheet" href="/expert/resources/css/project-detail.css">
</head>
<body>
    <!-- ヘッダー -->
    <div id="header-container"></div>

    <!-- サイドバー -->
    <div id="sidebar-container"></div>

    <!-- メインコンテンツ -->
    <main class="main-content" id="mainContent">
        <div class="content-wrapper">
            <!-- 動画セクション -->
            <div class="video-section">
                <!-- 動画プレイヤー -->
                <div class="video-container">
                    <div class="video-player" id="videoPlayer">
                        🎬
                        <button class="play-button" onclick="playVideo()">▶</button>
                    </div>
                    <div class="video-info">
                        <h1 class="video-title">効果的なプレゼンテーション術 - 聴衆を惹きつける方法</h1>
                        <div class="video-meta">
                            <div class="meta-item">
                                <span>👤</span>
                                <span>田中 太郎 講師</span>
                            </div>
                            <div class="meta-item">
                                <span>⏱️</span>
                                <span>15分30秒</span>
                            </div>
                            <div class="meta-item">
                                <span>👁️</span>
                                <span>1,234回視聴</span>
                            </div>
                            <div class="meta-item">
                                <span>📅</span>
                                <span>2024年8月27日</span>
                            </div>
                            <div class="meta-item">
                                <span class="level-badge level-intermediate">中級</span>
                            </div>
                        </div>
                        <div class="video-description">
                            <div class="description-title">📖 動画の概要</div>
                            <div class="description-text">
                                この動画では、効果的なプレゼンテーションを行うための具体的な技術とコツを学びます。聴衆の注意を引きつけ、メッセージを明確に伝える方法から、緊張をコントロールする方法まで、実践的な内容を豊富な事例とともに解説します。ビジネスシーンでのプレゼンテーション力向上を目指す方に最適な内容です。
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 学習目標 -->
                <div class="learning-objectives">
                    <h3 class="objectives-title">🎯 学習目標</h3>
                    <ul class="objectives-list">
                        <li>効果的なプレゼンテーション構成の作り方を理解する</li>
                        <li>聴衆の関心を引きつけるオープニング技術を習得する</li>
                        <li>視覚的な資料の効果的な活用方法を学ぶ</li>
                        <li>緊張をコントロールし、自信を持って発表する方法を身につける</li>
                        <li>質疑応答セッションでの適切な対応方法を理解する</li>
                    </ul>
                </div>
            </div>

            <!-- フィードバックセクション -->
            <div class="feedback-section">
                <form class="feedback-form" onsubmit="submitFeedback(event)">
                    <h2 class="form-title">📝 学習フィードバック</h2>

                    <!-- 質問1: 理解度 -->
                    <div class="form-group">
                        <label class="form-label">1. この動画の内容をどの程度理解できましたか？</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="understanding1" name="understanding" value="完全に理解">
                                <label for="understanding1">完全に理解できた</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="understanding2" name="understanding" value="ほぼ理解">
                                <label for="understanding2">ほぼ理解できた</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="understanding3" name="understanding" value="部分的理解">
                                <label for="understanding3">部分的に理解できた</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="understanding4" name="understanding" value="理解困難">
                                <label for="understanding4">理解が困難だった</label>
                            </div>
                        </div>
                    </div>

                    <!-- 質問2: 満足度 -->
                    <div class="form-group">
                        <label class="form-label">2. この動画の満足度を教えてください</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="satisfaction1" name="satisfaction" value="非常に満足">
                                <label for="satisfaction1">⭐⭐⭐⭐⭐ 非常に満足</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="satisfaction2" name="satisfaction" value="満足">
                                <label for="satisfaction2">⭐⭐⭐⭐ 満足</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="satisfaction3" name="satisfaction" value="普通">
                                <label for="satisfaction3">⭐⭐⭐ 普通</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="satisfaction4" name="satisfaction" value="不満">
                                <label for="satisfaction4">⭐⭐ 不満</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="satisfaction5" name="satisfaction" value="非常に不満">
                                <label for="satisfaction5">⭐ 非常に不満</label>
                            </div>
                        </div>
                    </div>

                    <!-- 質問3: 学習者の経験レベル -->
                    <div class="form-group">
                        <label class="form-label" for="experience">3. プレゼンテーションの経験年数を教えてください</label>
                        <input type="text" id="experience" name="experience" class="form-input" placeholder="例: 3年">
                    </div>

                    <!-- 質問4: 最も有用だった内容 -->
                    <div class="form-group">
                        <label class="form-label">4. 最も有用だった内容はどれですか？（複数選択可）</label>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" id="useful1" name="useful" value="プレゼンテーション構成">
                                <label for="useful1">プレゼンテーション構成の作り方</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="useful2" name="useful" value="オープニング技術">
                                <label for="useful2">オープニング技術</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="useful3" name="useful" value="視覚資料活用">
                                <label for="useful3">視覚資料の活用方法</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="useful4" name="useful" value="緊張コントロール">
                                <label for="useful4">緊張のコントロール方法</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="useful5" name="useful" value="質疑応答">
                                <label for="useful5">質疑応答の対応方法</label>
                            </div>
                        </div>
                    </div>

                    <!-- 質問5: 実践度 -->
                    <div class="form-group">
                        <label class="form-label">5. 学んだ内容を実践で活用する予定はありますか？</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="practice1" name="practice" value="すぐに活用">
                                <label for="practice1">すぐに活用する予定</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="practice2" name="practice" value="近いうちに活用">
                                <label for="practice2">近いうちに活用する予定</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="practice3" name="practice" value="機会があれば活用">
                                <label for="practice3">機会があれば活用したい</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="practice4" name="practice" value="活用予定なし">
                                <label for="practice4">活用予定はない</label>
                            </div>
                        </div>
                    </div>

                    <!-- 質問6: 改善点 -->
                    <div class="form-group">
                        <label class="form-label" for="improvement">6. この動画の改善すべき点があれば教えてください</label>
                        <textarea id="improvement" name="improvement" class="form-textarea" placeholder="改善点や要望をご記入ください..."></textarea>
                    </div>

                    <!-- 質問7: 推奨度 -->
                    <div class="form-group">
                        <label class="form-label">7. この動画を同僚や友人に推奨しますか？</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="recommend1" name="recommend" value="強く推奨">
                                <label for="recommend1">強く推奨する</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recommend2" name="recommend" value="推奨">
                                <label for="recommend2">推奨する</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recommend3" name="recommend" value="どちらでもない">
                                <label for="recommend3">どちらでもない</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recommend4" name="recommend" value="推奨しない">
                                <label for="recommend4">推奨しない</label>
                            </div>
                        </div>
                    </div>

                    <!-- 質問8: 追加コメント -->
                    <div class="form-group">
                        <label class="form-label" for="comments">8. その他ご意見・ご感想があればお聞かせください</label>
                        <textarea id="comments" name="comments" class="form-textarea" placeholder="自由にご記入ください..."></textarea>
                    </div>

                    <button type="submit" class="submit-button">フィードバックを送信</button>
                </form>
            </div>
        </div>
    </main>

    <script>
        // 部品のHTMLを読み込み
        async function loadComponents() {
            try {
                console.log('コンポーネント読み込み開始');
                
                // ヘッダーを読み込み
                const headerResponse = await fetch('/expert/components/header.html');
                const headerHTML = await headerResponse.text();
                document.getElementById('header-container').innerHTML = headerHTML;
                console.log('ヘッダー読み込み完了');

                // サイドバーを読み込み
                const sidebarResponse = await fetch('/expert/components/sidebar.html');
                const sidebarHTML = await sidebarResponse.text();
                document.getElementById('sidebar-container').innerHTML = sidebarHTML;
                console.log('サイドバー読み込み完了');

                // 動画詳細ページがアクティブになるようにサイドバーを更新
                setTimeout(() => {
                    updateSidebarActive();
                }, 100);
            } catch (error) {
                console.error('コンポーネントの読み込みエラー:', error);
            }
        }

        // サイドバーのアクティブ状態を更新
        function updateSidebarActive() {
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            sidebarItems.forEach(item => {
                item.classList.remove('active');
                // project-detail.htmlの場合はプロジェクト検索メニューをアクティブにする
                if (item.href && (item.href.includes('/expert/projects') || item.href.includes('projects.html'))) {
                    item.classList.add('active');
                }
            });
        }

        // 動画再生
        function playVideo() {
            const videoPlayer = document.getElementById('videoPlayer');
            const playButton = videoPlayer.querySelector('.play-button');
            
            // 実際の実装では、ここで動画プレイヤーを初期化します
            playButton.innerHTML = '⏸️';
            playButton.onclick = pauseVideo;
            
            // シミュレーション: 背景色を変更して再生状態を示す
            videoPlayer.style.background = 'linear-gradient(135deg, #43a047 0%, #388e3c 100%)';
            
            alert('動画を再生します。\n\n実際の実装では、ここで動画プレイヤー（YouTube、Vimeo等）が起動します。');
        }

        // 動画一時停止
        function pauseVideo() {
            const videoPlayer = document.getElementById('videoPlayer');
            const playButton = videoPlayer.querySelector('.play-button');
            
            playButton.innerHTML = '▶';
            playButton.onclick = playVideo;
            
            videoPlayer.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        }

        // フィードバック送信
        function submitFeedback(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const feedback = {};
            
            // フォームデータを収集
            for (let [key, value] of formData.entries()) {
                if (feedback[key]) {
                    // 複数選択の場合は配列にする
                    if (Array.isArray(feedback[key])) {
                        feedback[key].push(value);
                    } else {
                        feedback[key] = [feedback[key], value];
                    }
                } else {
                    feedback[key] = value;
                }
            }
            
            console.log('フィードバックデータ:', feedback);
            
            // 送信成功のメッセージを表示
            alert('フィードバックを送信しました。\nご協力ありがとうございました！\n\n実際の実装では、サーバーにデータが送信されます。');
            
            // フォームをリセット
            event.target.reset();
        }

        // ページ読み込み時の初期化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM読み込み完了');
            loadComponents();
        });

        // 追加の読み込み確認
        window.addEventListener('load', function() {
            console.log('ページ読み込み完了');
            // サイドバーが読み込まれていない場合は再試行
            if (!document.querySelector('.sidebar')) {
                console.log('サイドバーが見つからないため再読み込み');
                setTimeout(loadComponents, 500);
            }
        });

        // ウィンドウリサイズ対応
        window.addEventListener('resize', function() {
            const sidebar = document.querySelector('.sidebar');
            if (window.innerWidth > 1024 && sidebar) {
                sidebar.style.transform = '';
            }
        });
    </script>
</body>
</html>
